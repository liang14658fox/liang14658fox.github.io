---
title: 有关日期的操作
---

 **是否补零** | **分隔符** | **格式**     | **举例**     | **缩短为6位** | **举例**   
----------|---------|------------|------------|-----------|----------
 1        | -       | yyyy-MM-dd | `2012-01-01` | yy-MM-dd  | `99-01-01` 
 1        | /       | yyyy/MM/dd | `2012/01/01` | yy/MM/dd  | `99/01/01` 
 0        | -       | yyyy-M-d   | `2012-1-1`   | yy-M-d    | `99-1-1`   
 0        | /       | yyyy/M/d   | `2012/1/1`   | yy/M/d    | `99/1/1`  
 必须补零     | 无       | yyyyMMdd   | `20120101`   | yyMMdd    | `990101`   

## 1. 获得任意当下日期之前的日期，配合任意年份


一般用于Vue项目中element的日期选择器。

* 需求：想要提交的日期区间有一个范围，当清空element的date-picker时触发。往往用于配合表单的提交。

得到的日期的格式为 `yyyy-MM-dd` 。

::: code-group
```js [获得半年之前的日期]
const cc = new Date().getTime()
var halfYear = 365 / 2 * 24 * 3600 * 1000;
var pastResult = cc - halfYear
var pastDate = new Date(pastResult),
  pastYear = pastDate.getFullYear(),
  pastMonth = pastDate.getMonth() + 1,
  pastDay = pastDate.getDate();
console.log(pastYear + '-' + pastMonth + '-' + pastDay)
//打印格式为 XXXX-XX-XX
```
```js [获得一年之前的日期]
const cc = new Date().getTime()
var oneYear = 365 / 24 * 3600 * 1000; //将halfYear换为oneYear
var pastResult = cc - oneYear 
var pastDate = new Date(pastResult),
  pastYear = pastDate.getFullYear(),
  pastMonth = pastDate.getMonth() + 1,
  pastDay = pastDate.getDate();
console.log(pastYear + '-' + pastMonth + '-' + pastDay)
//如果现在是2022年2月9日，则输出2021-02-09
```
```js [在Vue组件中得到「现在日期」-「1年之前」的区间]
const cc = new Date().getTime()
var oneYear = 365 / 24 * 3600 * 1000; //将halfYear换为oneYear
var pastResult = cc - oneYear 
var pastDate = new Date(pastResult),
  pastYear = pastDate.getFullYear(),
  pastMonth = pastDate.getMonth() + 1,
  pastDay = pastDate.getDate();
this.dateStart = pastYear + '-' + pastMonth + '-' + pastDay
this.dateEnd = pastYear + 1 + '-' + pastMonth + '-' + pastDay
```
:::

## 2. 根据月份获得当月有多少天
:::code-group
```js [方案一]
function getMonthLength(date) {
    let d = new Date(date)
    //将日期设置为下月一号
    d.setMonth(d.getMonth()+1)
    d.setDate('1')
    //获得本月最后一天
    d.setDate(d.getDate()-1)
    return d.getDate()
}
getMonthLength("2022-01-02") //31
```
```js [方案二]
function getMonthLength(year,month){
    return new Date(year,month,0).getDate()
}
getMonthLength(2022,02) //28
```
:::
## 3. 比较日期先后
注意格式
```js
function compareTime(startdate, enddate) {
	var date1 = startdate;
	var date2 = enddate;
	if (Date.parse(date1) < Date.parse(date2)) {
		return '<'
	} else if (Date.parse(date1) > Date.parse(date2)) {
		return '>'
	} else {
		return '='
	}
}
let time1 = '2022-12-13'
let time2 = '2022-11-11'
compareTime(time1, time2)
```

## 4. 比较格式为 `yyyyMMdd` 的日期大小
可以使用`Date`对象来比较两个日期的先后大小。先将两个日期字符串转换为`Date`对象，然后使用日期对象的`getTime()`方法获取时间戳，最后比较时间戳的大小即可。

以下是一个示例代码：

```javascript
function compareDate(dateStr1, dateStr2) {
const date1 = new Date(dateStr1.slice(0, 4), Number(dateStr1.slice(4, 6)) - 1, dateStr1.slice(6));
const date2 = new Date(dateStr2.slice(0, 4), Number(dateStr2.slice(4, 6)) - 1, dateStr2.slice(6));
const time1 = date1.getTime();
const time2 = date2.getTime();
if (time1 > time2) {
return 1;
} else if (time1 < time2) {
return -1;
} else {
return 0;
}
}
```

以上代码中，`compareDate`函数接受两个字符串形式的日期，将其转换为`Date`对象后比较大小。如果第一个日期比第二个日期晚，返回1，如果第一个日期比第二个日期早，返回-1，否则返回0。


