import{_ as s,o as n,c as a,a as p}from"./app.2bdaaa62.js";const d=JSON.parse('{"title":"发布npm包","description":"","frontmatter":{"title":"发布npm包"},"headers":[{"level":3,"title":"使用 dumi 发布个人的 npm 包","slug":"使用-dumi-发布个人的-npm-包","link":"#使用-dumi-发布个人的-npm-包","children":[]},{"level":2,"title":"1. 前期准备","slug":"_1-前期准备","link":"#_1-前期准备","children":[]},{"level":2,"title":"2. 使用 dumi","slug":"_2-使用-dumi","link":"#_2-使用-dumi","children":[]},{"level":2,"title":"3. 发布前注意事项","slug":"_3-发布前注意事项","link":"#_3-发布前注意事项","children":[]},{"level":2,"title":"5. 补充相关命令","slug":"_5-补充相关命令","link":"#_5-补充相关命令","children":[]},{"level":2,"title":"解决遇到的问题","slug":"解决遇到的问题","link":"#解决遇到的问题","children":[]}],"relativePath":"articles/vue/node相关/01.发布npm包.md"}'),l={name:"articles/vue/node相关/01.发布npm包.md"},e=p(`<h3 id="使用-dumi-发布个人的-npm-包" tabindex="-1">使用 dumi 发布个人的 npm 包 <a class="header-anchor" href="#使用-dumi-发布个人的-npm-包" aria-hidden="true">#</a></h3><p>dumi 2.0 发布属于个人的 npm 包 | 造轮子必备技能</p><h2 id="_1-前期准备" tabindex="-1">1. 前期准备 <a class="header-anchor" href="#_1-前期准备" aria-hidden="true">#</a></h2><ul><li><p>一个 npm 账号，如果没有的话需要自行注册。</p></li><li><p>dumi 基础。</p></li></ul><h2 id="_2-使用-dumi" tabindex="-1">2. 使用 dumi <a class="header-anchor" href="#_2-使用-dumi" aria-hidden="true">#</a></h2><p>通过脚手架安装，根据提示选择对应的模版，由于我们要发布 <code>npm</code> 包，所以选择 <code>React Library</code>。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create-dumi</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_3-发布前注意事项" tabindex="-1">3. 发布前注意事项 <a class="header-anchor" href="#_3-发布前注意事项" aria-hidden="true">#</a></h2><p>第一，<code>npm</code> 源需要使用 <code>npmjs</code></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmjs.org</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>第二，需要执行 <code>npm login</code>，填写用户名，邮箱等。</p><p>第三，<code>package.json</code> 里边 <code>name</code> 需要用小写，不能用大写</p><p>第四，确保 <code>package.json</code> 里边的 <code>name</code> 和目前 <code>npmjs</code> 网站已发布的不冲突。</p><h1 id="版本号规范" tabindex="-1">版本号规范 <a class="header-anchor" href="#版本号规范" aria-hidden="true">#</a></h1><p><code>npm</code> 包的版本通常遵循 <code>semver</code> 语义化版本规范。</p><p>版本格式为：<code>major.minor.patch</code>，每个字母代表的含义如下：</p><p>主版本号（major）：当你做了不兼容的 API 修改， 次版本号（minor）：当你做了向下兼容的功能性新增， 修订号（patch）：当你做了向下兼容的问题修正。</p><p>先行版本号是加到修订号的后面，作为版本号的延伸；当要发行大版本或核心功能时，但不能保证这个版本完全正常，就要先发一个先行版本。</p><p>先行版本号的格式是在修订版本号后面加上一个连接号（-），再加上一连串以点（.）分割的标识符，标识符可以由英文、数字和连接号（[0-9A-Za-z-]）组成。举个例子：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">​​</span><span style="color:#F78C6C;">.0</span><span style="color:#A6ACCD;">-alpha</span></span>
<span class="line"><span style="color:#A6ACCD;">1.0.0-alpha.</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">1.0.0-0.2.5</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>常见的先行版本号有：</p><p><code>alpha</code>：不稳定版本，一般而言，该版本的 Bug 较多，需要继续修改，是测试版本 <code>beta</code>：基本稳定，相对于 Alpha 版已经有了很大的进步，消除了严重错误 <code>rc</code>：和正式版基本相同，基本上不存在导致错误的 Bug <code>release</code>：最终版本 此处参考：从零开始发布自己的 NPM 包</p><p>当然，我们最好是使用命令来规范我们的版本，举例：</p><p>以下主要介绍常用的几个命令</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">major</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">（3.1.0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">4.0.0）</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">minor（2.0.1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">2.1.0）</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">patch（2.0.0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">2.0.1）</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_5-补充相关命令" tabindex="-1">5. 补充相关命令 <a class="header-anchor" href="#_5-补充相关命令" aria-hidden="true">#</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">登录自己的</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">账号</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">退出当前账号</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看当前身份</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">who</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">am</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">发布</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">撤销发布某个版本</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unpublish</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">pkg</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">version</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="解决遇到的问题" tabindex="-1">解决遇到的问题 <a class="header-anchor" href="#解决遇到的问题" aria-hidden="true">#</a></h2><p>403 问题</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">code</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">E403</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Forbidden</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PUT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmjs.org/xxx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">You</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">have</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">permission</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logged</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">correct</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user?</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">In</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">most</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cases,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">one</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dependencies</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requesting</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">forbidden</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">security</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">policy.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="一般是两种情况" tabindex="-1">一般是两种情况： <a class="header-anchor" href="#一般是两种情况" aria-hidden="true">#</a></h1><ul><li>邮箱不对</li><li>package.json 里边的 name 和目前 npmjs 网站已发布的冲突了 参考Solve the error when npm publish for the first time.</li></ul>`,32),o=[e];function r(c,t,C,i,y,A){return n(),a("div",null,o)}const m=s(l,[["render",r]]);export{d as __pageData,m as default};
