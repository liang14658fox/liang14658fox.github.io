import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.681fc4ae.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"4_frame_Vue.js/库/Element/134.表单校验.md","filePath":"4_frame_Vue.js/库/Element/134.表单校验.md"}'),p={name:"4_frame_Vue.js/库/Element/134.表单校验.md"},o=l(`<h2 id="同时校验多个表单" tabindex="-1">同时校验多个表单 <a class="header-anchor" href="#同时校验多个表单" aria-label="Permalink to &quot;同时校验多个表单&quot;">​</a></h2><p>element的表单的校验是一个异步过程，如果需要同时校验，则需要配合promise的all方法。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">		methods: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">confirm</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">row</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    	</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">validates</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">all</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">promiseValidate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;name_ref&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> row.contral.index),</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">promiseValidate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;startDate_ref&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> row.contral.index),</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">promiseValidate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;duration_ref&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> row.contral.index),</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">promiseValidate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;each_issue_ref&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> row.contral.index)</span></span>
<span class="line"><span style="color:#E1E4E8;">		    	])</span></span>
<span class="line"><span style="color:#E1E4E8;">		    	</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (validates.</span><span style="color:#B392F0;">every</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		row.contral.change </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">		    	}</span></span>
<span class="line"><span style="color:#E1E4E8;">		    },</span></span>
<span class="line"><span style="color:#E1E4E8;">		    </span><span style="color:#B392F0;">promiseValidate</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    	</span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">resolve</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">reject</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		</span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    			</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$refs[key].</span><span style="color:#B392F0;">validate</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">isValid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    				</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">		    			})</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="color:#E1E4E8;">		    			</span><span style="color:#B392F0;">reject</span><span style="color:#E1E4E8;">(err)</span></span>
<span class="line"><span style="color:#E1E4E8;">		    		}</span></span>
<span class="line"><span style="color:#E1E4E8;">		    	})</span></span>
<span class="line"><span style="color:#E1E4E8;">		    },</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		methods: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">confirm</span><span style="color:#24292E;">(</span><span style="color:#E36209;">row</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">		    	</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">validates</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">Promise</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">all</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">		    		</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">promiseValidate</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;name_ref&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> row.contral.index),</span></span>
<span class="line"><span style="color:#24292E;">		    		</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">promiseValidate</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;startDate_ref&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> row.contral.index),</span></span>
<span class="line"><span style="color:#24292E;">		    		</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">promiseValidate</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;duration_ref&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> row.contral.index),</span></span>
<span class="line"><span style="color:#24292E;">		    		</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">promiseValidate</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;each_issue_ref&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> row.contral.index)</span></span>
<span class="line"><span style="color:#24292E;">		    	])</span></span>
<span class="line"><span style="color:#24292E;">		    	</span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (validates.</span><span style="color:#6F42C1;">every</span><span style="color:#24292E;">(</span><span style="color:#E36209;">item</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item)) {</span></span>
<span class="line"><span style="color:#24292E;">		    		row.contral.change </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">		    	}</span></span>
<span class="line"><span style="color:#24292E;">		    },</span></span>
<span class="line"><span style="color:#24292E;">		    </span><span style="color:#6F42C1;">promiseValidate</span><span style="color:#24292E;">(</span><span style="color:#E36209;">key</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">		    	</span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">Promise</span><span style="color:#24292E;">((</span><span style="color:#E36209;">resolve</span><span style="color:#24292E;">, </span><span style="color:#E36209;">reject</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		    		</span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		    			</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.$refs[key].</span><span style="color:#6F42C1;">validate</span><span style="color:#24292E;">(</span><span style="color:#E36209;">isValid</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		    				</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(isValid)</span></span>
<span class="line"><span style="color:#24292E;">		    			})</span></span>
<span class="line"><span style="color:#24292E;">		    		} </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (err) {</span></span>
<span class="line"><span style="color:#24292E;">		    			</span><span style="color:#6F42C1;">reject</span><span style="color:#24292E;">(err)</span></span>
<span class="line"><span style="color:#24292E;">		    		}</span></span>
<span class="line"><span style="color:#24292E;">		    	})</span></span>
<span class="line"><span style="color:#24292E;">		    },</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h2 id="表单校验配合-v-for" tabindex="-1">表单校验配合 <code>v-for</code> <a class="header-anchor" href="#表单校验配合-v-for" aria-label="Permalink to &quot;表单校验配合 \`v-for\`&quot;">​</a></h2><p>element的表单通过vue2提供的 <code>v-for</code> 之后，获得的ref会变成一个数组，这时仅需在指定代码位置添加一个[0]即可正常获得dom元素。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">		methods: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">                that.$refs[key][</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">].</span><span style="color:#B392F0;">validate</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">isValid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">					</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">				})</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		methods: {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">                that.$refs[key][</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].</span><span style="color:#6F42C1;">validate</span><span style="color:#24292E;">(</span><span style="color:#E36209;">isValid</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">					</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(isValid)</span></span>
<span class="line"><span style="color:#24292E;">				})</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h2 id="表单校验-v-for-仅校验checked部分" tabindex="-1">表单校验 + <code>v-for</code> + 仅校验checked部分 <a class="header-anchor" href="#表单校验-v-for-仅校验checked部分" aria-label="Permalink to &quot;表单校验 + \`v-for\` + 仅校验checked部分&quot;">​</a></h2>`,7),t=[o];function e(c,r,E,y,i,d){return a(),n("div",null,t)}const m=s(p,[["render",e]]);export{h as __pageData,m as default};
